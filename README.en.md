# MultiLog Logging System

A lightweight, high-performance C++ logging system that supports multi-level logging output, asynchronous file writing, and batch IO optimization, suitable for the logging requirements of medium and small-sized projects.

## Core Features

* **Multi-log level** : support `TRACE`/`DEBUG`/`INFO`/`WARNING`/`ERROR`/`FATAL`/`CRITICAL` 7-level log.
* **Asynchronous output** : Log writing is handled asynchronously through a background thread to avoid blocking the main thread.
* **Batch IO Optimization** : Batch write log events to the file when they accumulate to a specified number, reducing the number of disk I/O operations.
* **Thread-safe** : Ensure log safety in a multithreaded environment through thread-local storage and mutex locks.
* **Simple and easy to use** : Through macro definition ( `LOGINFO`/`LOGERROR` Simplify log calls.

## Getting Started

### Environmental Requirements

* compiler: Supports C++11 and above standards
* Operating System: Linux

### Compile and Install

#### Install locally

1. Clone to local

```
git clone https://gitee.com/Fighter-CTN/multilog.git
cd multilog
```

2. Build with CMake

```
mkdir build && cd build
cmake ..
sudo make install
# 生成库文件 libmultilog.a（静态库）
```

3. Integrate into your project

* Include header file directory (include/)
* The library file generated by the link (-lmultilog

#### In integrated projects

1. Clone to the project

```
git clone https://gitee.com/Fighter-CTN/multilog.git
```

2. CMakeLists.txt configuration for the main project

```
# 添加日志项目作为子目录
# 这会自动编译multilog静态库
add_subdirectory(third_party/multilog)

# 链接日志库
target_link_libraries(main_app PRIVATE multilog Threads::Threads)

# 包含日志库的头文件目录
target_include_directories(main_app PRIVATE 
    third_party/multilog/include
)

# 可选：关闭日志库的测试程序编译（如果不需要）
set(BUILD_TESTS OFF CACHE BOOL "Build multilog tests" FORCE)
```

## Instructions for Use

Use log macros directly in the code to output logs of different levels:

```
#include "logger.h"

int main() {
    // 输出不同级别的日志
    LOGTRACE << "This is a trace message";
    LOGDEBUG << "Debugging variable x = " << 42;
    LOGINFO << "Program started successfully";
    LOGWARN << "Low memory warning";
    LOGERROR << "File not found: example.txt";
    LOGFATAL << "Critical error: division by zero";
    LOGCRIT << "System crash imminent!";

    return 0;
}
```

After compilation and execution, the logs will be written to the log file, with content similar to:

```
[TRACE][main.cpp:5]This is a trace message
[DEBUG][main.cpp:6]Debugging variable x = 42
[INFO][main.cpp:7]Program started successfully
...
```

## Precautions

* Thread-safe: It can be safely used in a multithreaded environment without requiring additional locking.
* Risk of log loss: When the program exits abnormally, logs that have not reached the batch threshold may be lost (can be optimized by adding an exit hook).
* Custom Type Support: To output a custom class, you need to specialize format_specifier for that type in log_utils.h.

## Software Architecture

```
├── CMakeLists.txt
├── include
│   ├── appender_file.h
│   ├── appender.h
│   ├── log_event.h
│   ├── logger.h
│   ├── log_stream.h
│   ├── log_type.h
│   └── log_utils.h
├── LICENSE
├── README.en.md
├── README.md
├── src
│   ├── appender.cc
│   ├── appender_file.cc
│   ├── log_event.cc
│   ├── logger.cc
│   └── log_stream.cc
└── test
    ├── basic_test
    │   └── basic_test.cc
    ├── stress_test
    │   └── stress_test.cc
    └── thread_test
        └── thread_test.cc
```

## Development Plan

## Contribute

1. Fork this repository
2. Create new Feat_xxx branch
3. Submit code
4. New Pull Request
